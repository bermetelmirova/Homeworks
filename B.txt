create table univer(
id_univercity integer primary key,
un_name varchar unique not null);

create table faculty(
id_faculty integer primary key,
fac_name varchar unique not null,
univer integer references univer(id_univercity));

create table groupFaculty(
id_group integer primary key,
faculty integer references faculty(id_faculty),
group_code varchar not null unique);

create table student(
id_student integer primary key,
fio varchar not null,
group_id integer references groupFaculty(id_group),
date_birth date not null
);

create table classes(
id_class integer primary key,
name_class varchar not null unique);

create table marks(
student integer references student(id_student),
mark integer,
classes integer references classes(id_class));

insert into univer(id_univercity, un_name)
values(1, 'КГТУ');
insert into faculty (id_faculty, fac_name, univer)
values(1, 'ФИТ', 1),
(2, 'ИЭТ', 1); commit;
insert into groupFaculty (id_group, faculty, group_code)
values(1, 1, 'ПИ-4-19'),
(2, 2, 'УТС-5-20');

insert into student (id_student, fio, group_id, date_birth)
values(1, 'Elmirova', 1, '2001-12-30'),
(2, 'Usmanov', 1, '2001-06-15'),
(3, 'Shygaev', 1, '2001-11-06'),
(4, 'Vigel', 2, '2002-01-22'),
(5, 'Akjigtov', 2, '2002-08-05');

insert into classes (id_class, name_class)
values(1, 'ВПИ'),
(2, 'English');

insert into marks(student, mark, classes)
values(1, 5, 2),
(1, 3, 1),
(2, 3, 1),
(3, 4, 1),
(4, 5, 2),
(5, 3, 2);

select s.fio, avg(m.mark) as markAvg from marks m join student s ON s.id_student = m.student group by s.fio

select s.fio, g.group_code, f.fac_name, u.un_name from student s join  groupFaculty g on s.group_id = g.id_group
join faculty f on f.id_faculty = g.faculty join univer u on u.id_univercity = f.univer 




